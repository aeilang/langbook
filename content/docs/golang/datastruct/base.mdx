---
title: 基本类型
---

正是通过基本类型的组合，构建起庞大的 Go 程序，基本类型就是程序的砖和瓦。我们已经初步了解了`int`, `string`,`float64`类型，让我们再进一步!

## 1. 整数类型 [#int]

go 中有很多种整数类型，区别是它们占用内存的大小

### 1.1 有符号整数 [#sign]

有符号整数需要使用`1bit`来存储符号即，正负号。

| 整数类型 | 占用内存                              | 表示范围                             |
| :------- | ------------------------------------- | :----------------------------------- |
| int8     | 8 bit                                 | [-2^7 , 2^7-1]                       |
| int16    | 16 bit                                | [-2^15 , 2^15-1]                     |
| int32    | 32 bit                                | [-2^31, 2^31-1]                      |
| int      | 32 位系统: 32 bit ; 64 位系统: 64 bit | [-2^31 , 2^31-1] 或 [-2^63 , 2^63-1] |
| int64    | 64 bit                                | [-2^63 , 2^64-1]                     |

我们该使用哪一种类型呢？原则是你都应该使用`int`类型，原因有四:

1. `int`类型适配不同位数的系统。
2. 整数字面量，例如`1`默认为`int`类型； 内置函数, `len()`, `cap()`也返回`int`类型

3. 全使用`int`类型，能让你的程序保持一致，减少类型转换的开销。
4. 使用其他类型如`int8`,`int16`很容易造成整数溢出

<Callout title="整数溢出" type="error">

```go title="main.go"
package main

import "fmt"

func main() {
	var num int8 = 127 // 声明一个int8类型的变量，并赋予最大值
	num++              // num = num + 1 的简写
	fmt.Println(num)
}
```

运行后打印

```
-128
```

小心整数溢出，这样的 bug 难以发现

```sh
127([0 1 1 1 1 1 1 1]) + 1 -> -128([1 0 0 0 0 0 0 0 0])
```

</Callout>

如果你不知道要使用什么整数类型，那就使用`int`类型，除非你有明确的理由使用其他类型，例如能显著提高程序的性能。

<Callout title="不同的整数类型" type="error">

虽然都是整数类型，但它们是不同的类型

```go
var a int8 = 1
var b int  = a   // 编译期报错， a和b是不同的类型
```

即使你是 64 位系统，`int`和`int64`也是不同的类型

```go
var a int64 = 1
var b int   = a   // 编译期报错， a和b是不同的类型
```

需要显示类型转换，go 提倡明确性，不支持魔法(隐式类型转换)

```go
var a int64 = 1
var b int   = int(a)
```

</Callout>

### 1.2 无符号整数 [#unsign]

| 整数类型 | 占用内存                              | 表示范围                   |
| :------- | :------------------------------------ | :------------------------- |
| uint8    | 8 bit                                 | [0 , 2^8-1]                |
| uint16   | 16 bit                                | [0 , 2^16-1]               |
| uint32   | 32 bit                                | [0, 2^32-1]                |
| uint     | 32 位系统: 32 bit ; 64 位系统: 64 bit | [0, 2^32-1] 或 [0, 2^64-1] |
| uint64   | 64 bit                                | [0 , 2^64-1]               |

无符号整数用来存储非负数，即 0 和整数。注意点

- 不能存储负数

```go
var x uint = -1 // 编译错误,不能存储负数
```

- 类型转换 bug

```go
var i int = -1
var u uint = uint(i) // 不要这样做！会得到一个很大的数: 18446744073709551615
```

无符号整数使用很少，适合进行**位运行**。因为有符号整数需要 1 个 bit 来存储符号位，在进行位运算时会有意料不到的结果。其他情况下，你都应该使用`int`类型。

<Callout title="什么是位运算?">

| 运算符 | 描述                              | 示例                              | 结果 | uint8                                                 |
| ------ | --------------------------------- | --------------------------------- | ---- | ----------------------------------------------------- | --- | ------------- | --------------------------- |
| `&`    | 按位与： 两个位都为 1，结果才为 1 | `3 & 2`                           | `2`  | (0000 0011) `&` (0000 0010) = (0000 0010)             |
| `      | `                                 | 按位或 : 有一个位为 1，结果就为 1 | `3   | 2`                                                    | `3` | (0000 0011) ` | ` (0000 0010) = (0000 0011) |
| `^`    | 按位异或: 位相同为 0，不同为 1    | `3 ^ 2`                           | `1`  | (0000 0011) `^` (0000 0010) = (0000 0001)             |
| `&^`   | 按位清除: ...                     | `3 &^ 2`                          | `1`  | (0000 0011) `^` (0000 0010) = (0000 0001)             |
| `<<`   | 左移: 向左移动几位，低位补 0      | `3 << 1`                          | `6`  | (0000 0011) `<<` 1 = (0000 0110)， 左移一位，低位补 0 |
| `>>`   | 右移: 向右移动几位，高位补 0      | `3 >> 1`                          | `1`  | (0000 0011) `>>` 1 = (0000 0001)， 右移一位，高位补 0 |

`&^` 按位清除的规则是

- 如果第二个操作数对应位是 `1`，那么结果位为 `0`;
- 如果第二个操作数对应位是 `0`，结果保留第一个操作数对应位的值

位运算在实际开发中很少用到，但知道位运算符还是有必要的！

</Callout>

### 1.3 整数运算 [#calculate]

| 运算符 | 描述             | 示例    | 结果 |
| ------ | ---------------- | ------- | ---- |
| `+`    | 加法             | `3 + 2` | `5`  |
| `-`    | 减法             | `3 - 2` | `1`  |
| `*`    | 乘法             | `3 * 2` | `6`  |
| `/`    | 除法（整数除法） | `5 / 2` | `2`  |
| `%`    | 取模（余数）     | `5 % 2` | `1`  |

参与运算的类型必须是相同的类型:

```go
var a int   = 10
var b int32 = 5
var c int   = a + b // 编译期报错: mismatched types int and int32 // [!code highlight]
```

需要显式类型转换:

```go
var a int   = 10
var b int32 = 5
var c int   = a + int(b) // [!code highlight]
```

### 1.4 整数的字面量

我们一直使用十进制的字面量。整数也可以由二进制，八进制，十六进制表示。整数字面量的默认类型都是`int`, 即下列代码的`a`变量都为`int`类型。

- 十进制直接写数字

```go
a := 10
```

当使用较大的数时，使用`_`增加可读性

```go
a := 10_000 // a = 10000
```

- 二进制使用前缀`0b`

```go title="main.go"
package main

import "fmt"

func main() {
	a := 0b1010 // 1×2³ + 0×2² + 1×2¹ + 0×2⁰，等于 10。
	fmt.Println(a)
}
```

输出

```
10
```

- 八进制使用前缀`0`

```go title="main.go"
package main

import "fmt"

func main() {
	a := 012 // 1×8¹ + 2×8⁰，等于 10
	fmt.Println(a)
}
```

输出

```
10
```

- 十六进制使用前缀`0x`

```go title="main.go"
package main

import "fmt"

func main() {
	a := 0xA // A在十六进制中表示10，10×16⁰ = 10
	fmt.Println(a)
}
```

输出

```
10
```

### 1.5 整数类型的零值是 0

```go title="main.go"
package main

import "fmt"

func main() {
	var a int // [!code highlight]
	fmt.Println(a)
}
```

输出

```
0
```

## 2. 浮点数类型 [#float]

| 类型        | 描述         | 占用内存 | 精度            |
| ----------- | ------------ | -------- | --------------- |
| **float32** | 单精度浮点数 | 32 bit   | 约 6-7 位小数   |
| **float64** | 双精度浮点数 | 64 bit   | 约 15-16 位小数 |

该使用哪个类型呢? 我们应该都使用`float64`, 因为

- 精度高，能提供**更高的计算精确性**和**更大的数值范围**。
- 浮点数字面量默认是`float64`类型， 保持一致。
- 现代计算机的内存已经不是制约性能的瓶颈。

1. 科学计数法，使用`e` [#science]

```go
a := 1.23e3   // 表示 1.23 × 10^3 = 1230.0
b := 1.23e-3  // 表示 1.23 × 10^-3 = 0.00123
```

a, b 都是`float64`类型

2. 浮点数类型的零值是 0

```go title="main.go"
package main

import "fmt"

func main() {
	var a float64 // [!code highlight]
	fmt.Println(a)
}
```

输出

```
0
```

## 3. 布尔类型 [#bool]

`bool`类型只有`true`和`false`, 零值为`false`

```go title="main.go"
package main

import "fmt"

func main() {
	var a bool // [!code highlight]
	fmt.Println(a)
}
```

输出

```
false
```

### 3.1 关系运算符

常用关系运算符来创建`bool`变量:

| 运算符 | 描述     | 示例     | 结果    |
| ------ | -------- | -------- | ------- |
| `==`   | 等于     | `3 == 2` | `false` |
| `!=`   | 不等于   | `3 != 2` | `true`  |
| `<`    | 小于     | `3 < 2`  | `false` |
| `<=`   | 小于等于 | `3 <= 3` | `true`  |
| `>`    | 大于     | `3 > 2`  | `true`  |
| `>=`   | 大于等于 | `3 >= 4` | `false` |

常用在`if`判断语句中:

```go title="main.go"
package main

import "fmt"

func main() {
	hour := 13
	if hour > 12 { // [!code highlight]
		fmt.Println("上午")
	} else {
		fmt.Println("下午")
	}
}
```

输出

```
下午
```

### 整数类型

```go
var (
    a int     // 根据系统架构可能是32位或64位
    b int8    // -128 到 127
    c int16   // -32768 到 32767
    d int32   // -2^31 到 2^31-1
    e int64   // -2^63 到 2^63-1

    // 无符号整数
    f uint    // 根据系统架构可能是32位或64位
    g uint8   // 0 到 255
    h uint16  // 0 到 65535
    i uint32  // 0 到 2^32-1
    j uint64  // 0 到 2^64-1
)
```

### 浮点数类型

```go
var (
    k float32    // 32位浮点数
    l float64    // 64位浮点数（推荐使用）
)

pi := 3.14159    // 默认为float64
```

### 复数类型

```go
var (
    m complex64   // 32位实数和虚数
    n complex128  // 64位实数和虚数
)

c1 := 1 + 2i    // 复数字面量
```

## 2. 布尔类型

```go
var isTrue bool = true
isFalse := false
```

## 3. 字符串类型

```go
var name string = "Go语言"
message := "Hello, World!"

// 多行字符串
text := `这是一个
多行字符串
示例`
```

## 4. 字节和字符

```go
var (
    b byte = 'A'    // byte 是 uint8 的别名
    r rune = '中'    // rune 是 int32 的别名，用于表示Unicode码点
)
```

## 5. 类型转换示例

```go
var i int = 42
var f float64 = float64(i)    // 整数转浮点数
var u uint = uint(f)          // 浮点数转无符号整数

// 字符串转换
str := "10"
num, err := strconv.Atoi(str)  // 字符串转整数
if err != nil {
    fmt.Println("转换错误:", err)
}
```

## 6. 零值

在 Go 中，每种类型都有默认值（零值）：

- 数值类型：`0`
- 布尔类型：`false`
- 字符串：`""`（空字符串）
- 指针：`nil`

## 实践示例

### 基本类型使用示例

```go
package main

import "fmt"

func main() {
    // 整数运算
    a := 10
    b := 20
    fmt.Println("a + b =", a+b)

    // 浮点数
    pi := 3.14159
    radius := 5.0
    area := pi * radius * radius
    fmt.Printf("圆的面积: %.2f\n", area)

    // 字符串
    firstName := "Go"
    lastName := "语言"
    fullName := firstName + lastName
    fmt.Println("完整名称:", fullName)

    // 布尔运算
    isGo := true
    isFun := true
    fmt.Println("Go是否有趣?", isGo && isFun)
}
```

## 注意事项

1. Go 是强类型语言，不同类型之间的运算需要显式转换
2. 整数除法会舍去小数部分
3. 字符串是不可变的
4. 使用`:=`声明变量时，Go 会自动推断类型
5. 在实际开发中，通常使用`int`而不是`int32`或`int64`，除非有特殊需求

## 练习建议

1. 尝试定义不同类型的变量并打印它们的值
2. 实践类型转换，特别是在数值类型之间
3. 使用字符串的各种操作方法
4. 编写简单程序来理解类型的零值概念

记住：理解基本类型是学习 Go 语言的重要基础，建议多写代码实践来加深理解。
